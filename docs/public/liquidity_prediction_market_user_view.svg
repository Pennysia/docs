<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN"
 "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<!-- Generated by graphviz version 2.43.0 (0)
 -->
<!-- Title: %3 Pages: 1 -->
<svg width="1343pt" height="299pt"
 viewBox="0.00 0.00 1342.69 299.46" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
<g id="graph0" class="graph" transform="scale(1 1) rotate(0) translate(4 295.46)">
<title>%3</title>
<polygon fill="white" stroke="transparent" points="-4,4 -4,-295.46 1338.69,-295.46 1338.69,4 -4,4"/>
<!-- User -->
<g id="node1" class="node">
<title>User</title>
<ellipse fill="#fff2cc" stroke="#d6b656" cx="405.84" cy="-247.46" rx="83.69" ry="18"/>
<text text-anchor="middle" x="405.84" y="-243.76" font-family="Times,serif" font-size="14.00">User (Swapper)</text>
</g>
<!-- AS -->
<g id="node3" class="node">
<title>AS</title>
<polygon fill="#f8cecc" stroke="#b85450" points="756.69,-214.46 630.69,-214.46 630.69,-178.46 756.69,-178.46 756.69,-214.46"/>
<text text-anchor="middle" x="693.69" y="-192.76" font-family="Times,serif" font-size="14.00">Token A &#45; Short</text>
</g>
<!-- User&#45;&gt;AS -->
<g id="edge5" class="edge">
<title>User&#45;&gt;AS</title>
<path fill="none" stroke="black" d="M470.99,-236.01C515.31,-228.11 574.32,-217.58 620.32,-209.37"/>
<polygon fill="black" stroke="black" points="621,-212.8 630.22,-207.6 619.77,-205.91 621,-212.8"/>
<text text-anchor="middle" x="560.19" y="-231.26" font-family="Times,serif" font-size="14.00">Sends Token A</text>
</g>
<!-- BS -->
<g id="node5" class="node">
<title>BS</title>
<polygon fill="#f8cecc" stroke="#b85450" points="1128.69,-233.46 1001.69,-233.46 1001.69,-197.46 1128.69,-197.46 1128.69,-233.46"/>
<text text-anchor="middle" x="1065.19" y="-211.76" font-family="Times,serif" font-size="14.00">Token B &#45; Short</text>
</g>
<!-- User&#45;&gt;BS -->
<g id="edge10" class="edge">
<title>User&#45;&gt;BS</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M486.68,-252.49C598.49,-258.08 807.78,-263.24 983.69,-237.46 987.16,-236.95 990.7,-236.34 994.25,-235.65"/>
<polygon fill="black" stroke="black" points="995.24,-239.02 1004.3,-233.53 993.79,-232.17 995.24,-239.02"/>
<text text-anchor="middle" x="693.69" y="-260.26" font-family="Times,serif" font-size="14.00">Sends Token B</text>
</g>
<!-- AL -->
<g id="node2" class="node">
<title>AL</title>
<polygon fill="#d5e8d4" stroke="#82b366" points="1326.69,-233.46 1204.69,-233.46 1204.69,-197.46 1326.69,-197.46 1326.69,-233.46"/>
<text text-anchor="middle" x="1265.69" y="-211.76" font-family="Times,serif" font-size="14.00">Token A &#45; Long</text>
</g>
<!-- AL&#45;&gt;User -->
<g id="edge12" class="edge">
<title>AL&#45;&gt;User</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1204.35,-230.8C1198.4,-232.12 1192.44,-233.36 1186.69,-234.46 1161.12,-239.32 1154.5,-239.17 1128.69,-242.46 908.65,-270.53 852.41,-281.76 630.69,-275.46 575.95,-273.9 561.97,-275.62 507.69,-268.46 496.37,-266.97 484.43,-264.91 472.88,-262.67"/>
<polygon fill="black" stroke="black" points="473.35,-259.2 462.86,-260.66 471.98,-266.06 473.35,-259.2"/>
<text text-anchor="middle" x="879.19" y="-280.26" font-family="Times,serif" font-size="14.00">Receives Token A</text>
</g>
<!-- AL&#45;&gt;AL -->
<g id="edge13" class="edge">
<title>AL&#45;&gt;AL</title>
<path fill="none" stroke="#4caf50" stroke-dasharray="5,2" d="M1247.96,-233.61C1245.23,-243 1251.14,-251.46 1265.69,-251.46 1274.55,-251.46 1280.21,-248.32 1282.66,-243.74"/>
<polygon fill="#4caf50" stroke="#4caf50" points="1286.16,-243.84 1283.41,-233.61 1279.18,-243.32 1286.16,-243.84"/>
<text text-anchor="middle" x="1265.69" y="-255.26" font-family="Times,serif" font-size="14.00">Fee reward → Long</text>
</g>
<!-- BL -->
<g id="node4" class="node">
<title>BL</title>
<polygon fill="#d5e8d4" stroke="#82b366" points="1126.19,-118.46 1004.19,-118.46 1004.19,-82.46 1126.19,-82.46 1126.19,-118.46"/>
<text text-anchor="middle" x="1065.19" y="-96.76" font-family="Times,serif" font-size="14.00">Token B &#45; Long</text>
</g>
<!-- AS&#45;&gt;BL -->
<g id="edge6" class="edge">
<title>AS&#45;&gt;BL</title>
<path fill="none" stroke="black" d="M753.56,-178.38C760.66,-176.33 767.82,-174.31 774.69,-172.46 866.91,-147.62 891.16,-146.16 983.69,-122.46 987.09,-121.59 990.57,-120.68 994.08,-119.76"/>
<polygon fill="black" stroke="black" points="995.25,-123.07 1004.02,-117.13 993.46,-116.31 995.25,-123.07"/>
<text text-anchor="middle" x="879.19" y="-176.26" font-family="Times,serif" font-size="14.00">Swap</text>
</g>
<!-- AS&#45;&gt;BS -->
<g id="edge9" class="edge">
<title>AS&#45;&gt;BS</title>
<path fill="none" stroke="#e53935" d="M756.92,-192.8C815.6,-190.27 905.9,-188.73 983.69,-197.46 986.24,-197.75 988.83,-198.08 991.44,-198.45"/>
<polygon fill="#e53935" stroke="#e53935" points="991.14,-201.95 1001.56,-200.08 992.25,-195.04 991.14,-201.95"/>
<text text-anchor="middle" x="879.19" y="-201.26" font-family="Times,serif" font-size="14.00">Fee taken from Long → Short</text>
</g>
<!-- BL&#45;&gt;User -->
<g id="edge7" class="edge">
<title>BL&#45;&gt;User</title>
<path fill="none" stroke="black" d="M1003.84,-85.43C918.39,-66.98 758.34,-42.91 630.69,-84.46 546.69,-111.8 467.95,-183.87 430.2,-222.37"/>
<polygon fill="black" stroke="black" points="427.64,-219.98 423.2,-229.6 432.67,-224.85 427.64,-219.98"/>
<text text-anchor="middle" x="693.69" y="-88.26" font-family="Times,serif" font-size="14.00">Receives Token B</text>
</g>
<!-- BL&#45;&gt;BL -->
<g id="edge8" class="edge">
<title>BL&#45;&gt;BL</title>
<path fill="none" stroke="#4caf50" d="M1047.09,-118.61C1044.31,-128 1050.34,-136.46 1065.19,-136.46 1074.23,-136.46 1080,-133.32 1082.5,-128.74"/>
<polygon fill="#4caf50" stroke="#4caf50" points="1086,-128.85 1083.28,-118.61 1079.02,-128.32 1086,-128.85"/>
<text text-anchor="middle" x="1065.19" y="-140.26" font-family="Times,serif" font-size="14.00">Fee reward → Long</text>
</g>
<!-- BS&#45;&gt;AL -->
<g id="edge11" class="edge">
<title>BS&#45;&gt;AL</title>
<path fill="none" stroke="black" stroke-dasharray="5,2" d="M1128.72,-215.46C1149.62,-215.46 1173.04,-215.46 1194.48,-215.46"/>
<polygon fill="black" stroke="black" points="1194.5,-218.96 1204.5,-215.46 1194.5,-211.96 1194.5,-218.96"/>
<text text-anchor="middle" x="1166.69" y="-219.26" font-family="Times,serif" font-size="14.00">Swap</text>
</g>
<!-- BS&#45;&gt;AS -->
<g id="edge14" class="edge">
<title>BS&#45;&gt;AS</title>
<path fill="none" stroke="#e53935" stroke-dasharray="5,2" d="M1001.59,-218.17C942.83,-219.93 852.55,-220.58 774.69,-212.46 772.16,-212.2 769.59,-211.89 767.01,-211.55"/>
<polygon fill="#e53935" stroke="#e53935" points="767.37,-208.07 756.96,-210.08 766.35,-214.99 767.37,-208.07"/>
<text text-anchor="middle" x="879.19" y="-222.26" font-family="Times,serif" font-size="14.00">Fee taken from Long → Short</text>
</g>
<!-- TokenA -->
<g id="node6" class="node">
<title>TokenA</title>
<ellipse fill="#dae8fc" stroke="#6c8ebf" cx="405.84" cy="-38.46" rx="47.39" ry="18"/>
<text text-anchor="middle" x="405.84" y="-34.76" font-family="Times,serif" font-size="14.00">Token A</text>
</g>
<!-- TokenA&#45;&gt;AL -->
<!-- TokenA&#45;&gt;AS -->
<!-- TokenB -->
<g id="node7" class="node">
<title>TokenB</title>
<ellipse fill="#dae8fc" stroke="#6c8ebf" cx="693.69" cy="-126.46" rx="48.19" ry="18"/>
<text text-anchor="middle" x="693.69" y="-122.76" font-family="Times,serif" font-size="14.00">Token B</text>
</g>
<!-- TokenB&#45;&gt;BL -->
<!-- TokenB&#45;&gt;BS -->
<!-- Legend -->
<g id="node8" class="node">
<title>Legend</title>
<polygon fill="#f5f5f5" stroke="#666666" points="279,-288.96 0,-288.96 0,-205.96 285,-205.96 285,-282.96 279,-288.96"/>
<polyline fill="none" stroke="#666666" points="279,-288.96 279,-282.96 "/>
<polyline fill="none" stroke="#666666" points="285,-282.96 279,-282.96 "/>
<text text-anchor="middle" x="142.5" y="-273.76" font-family="Times,serif" font-size="14.00">Legend:</text>
<text text-anchor="middle" x="142.5" y="-258.76" font-family="Times,serif" font-size="14.00">Green = Bucket earns fees</text>
<text text-anchor="middle" x="142.5" y="-243.76" font-family="Times,serif" font-size="14.00">Red = Bucket loses to fees</text>
<text text-anchor="middle" x="142.5" y="-228.76" font-family="Times,serif" font-size="14.00">Solid arrows = Example A→B swap</text>
<text text-anchor="middle" x="142.5" y="-213.76" font-family="Times,serif" font-size="14.00">Dashed arrows = Example B→A swap</text>
</g>
<!-- Legend&#45;&gt;User -->
</g>
</svg>
